{% extends 'base.html' %}

{% block title %}Mapa del Sitio - Bibliandria{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <h1 class="section-title mb-4">
                <i class="bi bi-diagram-3"></i> Mapa jerárquico del sitio web
            </h1>

            <nav aria-label="Mapa del sitio web de Bibliandria">
                <ol class="sitemap">

                    <!-- 1. Página de Inicio -->
                    <li>
                        <a href="{% url 'landing' %}">Página de Inicio</a>
                        <ol>
                            <li><a href="{% url 'login' %}">Iniciar Sesión</a></li>
                            <li><a href="{% url 'registro' %}">Registrarse</a></li>
                        </ol>
                    </li>

                    <!-- 2. Panel Principal -->
                    <li>
                        <a href="{% url 'home' %}">Panel Principal</a>
                        <ol>

                            <!-- 2.1 Bibliotecas Públicas -->
                            <li>
                                <a href="{% url 'bibliotecas_publicas' %}">Bibliotecas Públicas</a>
                                <ol>
                                    <li><a href="{% url 'ver_biblioteca' 'maria_lectora' %}">Ver Biblioteca de Otro Usuario</a>
                                        <span class="sitemap-note">(ej: maria_lectora)</span>
                                    </li>
                                </ol>
                            </li>

                            <!-- 2.2 Mi Biblioteca -->
                            <li>
                                <a href="{% url 'mi_biblioteca' %}">Mi Biblioteca</a>
                                <ol>
                                    <li><a href="{% url 'libro_crear' %}">Añadir Nuevo Libro</a></li>
                                    <li>
                                        <a href="{% url 'libro_detalle' 24 %}">Detalle de Libro</a>
                                        <span class="sitemap-note">(ej: id=24)</span>
                                        <ol>
                                            <li><a href="{% url 'libro_editar' 24 %}">Editar Libro</a></li>
                                            <li><a href="{% url 'libro_eliminar' 24 %}">Eliminar Libro</a></li>
                                            <li><a href="{% url 'resena_crear' 24 %}">Escribir Reseña</a></li>
                                            <li>
                                                <a href="{% url 'prestamo_crear' 24 %}">Registrar Préstamo</a>
                                                <ol>
                                                    <li><span class="sitemap-disabled">Devolver Préstamo</span>
                                                        <span class="sitemap-note">(requiere préstamo activo)</span>
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>

                            <!-- 2.3 Lista de Deseos -->
                            <li>
                                <a href="{% url 'lista_deseos' %}">Lista de Deseos</a>
                                <ol>
                                    <li><a href="{% url 'lista_deseos_eliminar' 9 %}">Eliminar de Lista de Deseos</a>
                                        <span class="sitemap-note">(ej: id=9)</span>
                                    </li>
                                </ol>
                            </li>

                            <!-- 2.4 Configuración -->
                            <li><a href="{% url 'configuracion' %}">Configuración</a></li>

                            <!-- 2.5 Cerrar Sesión -->
                            <li><a href="{% url 'logout' %}">Cerrar Sesión</a></li>

                        </ol>
                    </li>

                    {% if user.es_admin %}
                    <!-- 3. Trabajo Diseño de Interfaces -->
                    <li>
                        <span class="sitemap-category">Trabajo Diseño de Interfaces</span>
                        <ol>
                            <li>
                                <a href="{% url 'usuarios_lista' %}">Gestión de Usuarios</a>
                                <ol>
                                    <li><a href="{% url 'usuario_cambiar_privacidad' 1 %}">Cambiar Privacidad de Usuario</a>
                                        <span class="sitemap-note">(ej: id=1)</span>
                                    </li>
                                </ol>
                            </li>
                            <li><a href="{% url 'analisis' %}">Análisis de Usabilidad</a></li>
                            <li><a href="{% url 'sobre_nosotros' %}">Sobre Nosotros</a></li>
                            <li><a href="{% url 'mapa_web' %}">Mapa del Sitio Web</a></li>
                        </ol>
                    </li>
                    {% endif %}

                </ol>
            </nav>
        </div>
    </div>
</div>

<style>
    /* ===== Mapa del Sitio - Estilos jerárquicos ===== */
    .sitemap {
        list-style: none;
        padding-left: 0;
    }

    .sitemap li {
        padding: 0.15rem 0;
        line-height: 1.8;
    }

    /* Nivel 1 - raíz */
    .sitemap > li {
        margin-bottom: 1rem;
        font-size: 1.1rem;
        font-weight: 600;
    }

    .sitemap > li > a,
    .sitemap > li > .sitemap-category {
        color: var(--primary-color, #6D4C41);
        font-size: 1.15rem;
    }

    .sitemap-category {
        font-weight: 700;
    }

    /* Todas las sublistas */
    .sitemap ol {
        list-style: none;
        padding-left: 1.5rem;
        margin: 0;
        border-left: 2px solid var(--primary-color-light, #D7CCC8);
    }

    .sitemap ol li {
        font-weight: 400;
        font-size: 1rem;
    }

    /* Enlaces */
    .sitemap a {
        color: var(--accent-color, #1565C0);
        text-decoration: underline;
    }

    .sitemap a:hover,
    .sitemap a:focus {
        color: var(--primary-color, #6D4C41);
    }

    /* Notas pequeñas */
    .sitemap-note {
        color: #888;
        font-size: 0.82rem;
        font-style: italic;
        font-weight: 400;
    }

    /* Enlace deshabilitado */
    .sitemap-disabled {
        color: #aaa;
        font-weight: 400;
    }
</style>
{% endblock %}
